[gd_scene load_steps=20 format=4 uid="uid://qw4hbk40dyvm"]

[ext_resource type="Texture2D" uid="uid://b4gigoborowkw" path="res://textures/test_tiles.png" id="1_0ie11"]
[ext_resource type="Script" path="res://maps/test_map.gd" id="2_ywrl6"]
[ext_resource type="PackedScene" uid="uid://iwh84j268tml" path="res://maps/interactives/generic/interactive.tscn" id="4_72sth"]
[ext_resource type="Texture2D" uid="uid://cjklr64xiys0a" path="res://textures/sign.png" id="5_5jmsy"]
[ext_resource type="Texture2D" uid="uid://be0foyybi4008" path="res://textures/sun.png" id="6_dg1xt"]
[ext_resource type="Texture2D" uid="uid://dp8dy1cpk5km0" path="res://textures/couch.png" id="7_g1jef"]
[ext_resource type="Texture2D" uid="uid://binxw1c1e5vyc" path="res://textures/dog.png" id="7_vnn2i"]
[ext_resource type="Texture2D" uid="uid://dei0ir8jap6a" path="res://textures/grapes.png" id="8_1rt1a"]
[ext_resource type="PackedScene" uid="uid://ddmpp54vc5377" path="res://maps/interactives/generic/dialogue_signal_gate.tscn" id="9_amhi4"]
[ext_resource type="Texture2D" uid="uid://dpnsq7nn8m0l2" path="res://textures/stairs.png" id="9_sk700"]
[ext_resource type="Texture2D" uid="uid://qvcieo8d77lb" path="res://textures/gate_closed.png" id="10_2o7ph"]
[ext_resource type="Texture2D" uid="uid://cgnsug1o0el0w" path="res://textures/gate_open.png" id="11_77ahb"]
[ext_resource type="PackedScene" uid="uid://8hplcp22i5re" path="res://maps/interactives/lights/wall_light.tscn" id="12_kvvyy"]
[ext_resource type="PackedScene" uid="uid://b5mdx6baygoum" path="res://maps/interactives/generic/signal_gate.tscn" id="12_xfvy2"]
[ext_resource type="PackedScene" uid="uid://c2af6y8es466h" path="res://characters/generic/enemy.tscn" id="13_augbp"]
[ext_resource type="PackedScene" uid="uid://v2x25sfrymso" path="res://maps/interactives/generic/damage_activation_interactive.tscn" id="14_luyw1"]
[ext_resource type="Texture2D" uid="uid://cojmn67i5ba6g" path="res://textures/tesla_coil.png" id="15_ghxts"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_garr0"]
texture = ExtResource("1_0ie11")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0
0:0/0/custom_data_0 = true
1:0/0 = 0
1:0/0/terrain_set = 0
1:0/0/terrain = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
1:0/0/terrains_peering_bit/right_side = 0
1:0/0/terrains_peering_bit/left_side = 0
2:0/0 = 0
2:0/0/terrain_set = 0
2:0/0/terrain = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
3:0/0 = 0
3:0/0/terrain_set = 0
3:0/0/terrain = 0
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
3:0/0/terrains_peering_bit/left_side = 0
4:0/0 = 0
4:0/0/terrain_set = 0
4:0/0/terrain = 0
4:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
4:0/0/terrains_peering_bit/right_side = 0

[sub_resource type="TileSet" id="TileSet_xvokm"]
tile_size = Vector2i(64, 64)
physics_layer_0/collision_layer = 1
terrain_set_0/mode = 0
terrain_set_0/terrain_0/name = "Terrain 0"
terrain_set_0/terrain_0/color = Color(0.5, 0.34375, 0.25, 1)
custom_data_layer_0/name = "traversible"
custom_data_layer_0/type = 1
sources/0 = SubResource("TileSetAtlasSource_garr0")

[node name="TestMap" type="TileMapLayer"]
process_mode = 1
tile_map_data = PackedByteArray("AAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAD/////AAAAAAAAAAAAAP//AAAAAAAAAAABAP//AAAAAAAAAAABAAAAAAAAAAAAAAABAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAD//wEAAAAAAAAAAAD+/wEAAAAAAAAAAAD+/wAAAAAAAAAAAAD+////AAAAAAAAAAD+//7/AAAAAAAAAAD///7/AAAAAAAAAAAAAP7/AAAAAAAAAAABAP7/AAAAAAAAAAACAP7/AAAAAAAAAAACAP//AAAAAAAAAAACAAAAAAAAAAAAAAACAAEAAAAAAAAAAAD9//7/AAAAAAAAAAD9////AAAAAAAAAAD9/wAAAAAAAAAAAAD9/wEAAAAAAAAAAAD8//3/AAAAAAAAAAD9//3/AAAAAAAAAAD+//3/AAAAAAAAAAD///3/AAAAAAAAAAAAAP3/AAAAAAAAAAABAP3/AAAAAAAAAAACAP3/AAAAAAAAAAADAP3/AAAAAAAAAAD8/wIAAAAAAAAAAAD9/wIAAAAAAAAAAAD+/wIAAAAAAAAAAAD//wIAAAAAAAAAAAAAAAIAAAAAAAAAAAABAAIAAAAAAAAAAAACAAIAAAAAAAAAAAADAAIAAAAAAAAAAAADAAEAAAAAAAAAAAADAAAAAAAAAAAAAAADAP//AAAAAAAAAAADAP7/AAAAAAAAAAD8//7/AAAAAAAAAAD8////AAAAAAAAAAD8/wAAAAAAAAAAAAD8/wEAAAAAAAAAAAAAAPz/AAAAAAAAAAAEAAAAAAAAAAAAAAAEAP//AAAAAAAAAAAEAP3/AAAAAAAAAAAFAP3/AAAAAAAAAAAFAP7/AAAAAAAAAAAGAP7/AAAAAAAAAAAHAP7/AAAAAAAAAAAHAP//AAAAAAAAAAAHAAAAAAAAAAAAAAAGAAAAAAAAAAAAAAAGAAEAAAAAAAAAAAAFAAEAAAAAAAAAAAAFAAIAAAAAAAAAAAAEAAIAAAAAAAAAAAD7/wIAAAAAAAAAAAD6/wIAAAAAAAAAAAD6/wEAAAAAAAAAAAD6/wAAAAAAAAAAAAD6////AAAAAAAAAAD6//7/AAAAAAAAAAD6//3/AAAAAAAAAAD5//3/AAAAAAAAAAD4//3/AAAAAAAAAAD4//7/AAAAAAAAAAD4////AAAAAAAAAAD4/wAAAAAAAAAAAAD4/wEAAAAAAAAAAAD4/wIAAAAAAAAAAAD3/wIAAAAAAAAAAAAAAPb/AAAAAAAAAAAAAPf/AAAAAAAAAAD///f/AAAAAAAAAAD+//f/AAAAAAAAAAD9//f/AAAAAAAAAAD8//f/AAAAAAAAAAD8//j/AAAAAAAAAAD8//n/AAAAAAAAAAD8//r/AAAAAAAAAAD9//r/AAAAAAAAAAD9//v/AAAAAAAAAAD+//v/AAAAAAAAAAD///v/AAAAAAAAAAD8//v/AAAAAAAAAAAAAPv/AAAAAAAAAAABAPv/AAAAAAAAAAACAPv/AAAAAAAAAAADAPv/AAAAAAAAAAAEAPv/AAAAAAAAAAAEAPr/AAAAAAAAAAAFAPr/AAAAAAAAAAAFAPv/AAAAAAAAAAAFAPn/AAAAAAAAAAAFAPj/AAAAAAAAAAAFAPf/AAAAAAAAAAAEAPf/AAAAAAAAAAADAPf/AAAAAAAAAAACAPf/AAAAAAAAAAABAPf/AAAAAAAAAAD///j/AAAAAAAAAAD+//j/AAAAAAAAAAD9//j/AAAAAAAAAAD9//n/AAAAAAAAAAD+//r/AAAAAAAAAAD///r/AAAAAAAAAAAAAPr/AAAAAAAAAAABAPr/AAAAAAAAAAABAPn/AAAAAAAAAAAAAPn/AAAAAAAAAAD///n/AAAAAAAAAAD+//n/AAAAAAAAAAAAAPj/AAAAAAAAAAABAPj/AAAAAAAAAAACAPj/AAAAAAAAAAADAPj/AAAAAAAAAAAEAPj/AAAAAAAAAAAEAPn/AAAAAAAAAAADAPn/AAAAAAAAAAADAPr/AAAAAAAAAAACAPr/AAAAAAAAAAACAPn/AAAAAAAAAAAFAPX/AAAAAAAAAAAEAPX/AAAAAAAAAAADAPX/AAAAAAAAAAACAPX/AAAAAAAAAAABAPX/AAAAAAAAAAAAAPX/AAAAAAAAAAD///X/AAAAAAAAAAD+//X/AAAAAAAAAAD9//X/AAAAAAAAAAD8//X/AAAAAAAAAAD8//T/AAAAAAAAAAD8//P/AAAAAAAAAAD9//P/AAAAAAAAAAD+//P/AAAAAAAAAAD///P/AAAAAAAAAAAAAPP/AAAAAAAAAAABAPP/AAAAAAAAAAACAPP/AAAAAAAAAAADAPP/AAAAAAAAAAAEAPP/AAAAAAAAAAAFAPP/AAAAAAAAAAAFAPT/AAAAAAAAAAAEAPT/AAAAAAAAAAADAPT/AAAAAAAAAAACAPT/AAAAAAAAAAABAPT/AAAAAAAAAAAAAPT/AAAAAAAAAAD///T/AAAAAAAAAAD+//T/AAAAAAAAAAD9//T/AAAAAAAAAAD7//L/AAAEAAAAAAD7//P/AAACAAAAAAD7//T/AAACAAAAAAD7//X/AAACAAAAAAD7//b/AAAEAAAAAAD7//f/AAACAAAAAAD7//j/AAACAAAAAAD7//n/AAACAAAAAAD7//r/AAACAAAAAAD7//v/AAACAAAAAAD8//b/AAABAAAAAAD9//b/AAABAAAAAAD+//b/AAABAAAAAAD///b/AAADAAAAAAAFAPL/AAABAAAAAAAEAPL/AAABAAAAAAADAPL/AAABAAAAAAACAPL/AAABAAAAAAABAPL/AAABAAAAAAAAAPL/AAAAAAAAAAD///L/AAADAAAAAAD+//L/AAABAAAAAAD9//L/AAABAAAAAAD8//L/AAABAAAAAAAGAPX/AAACAAAAAAAGAPT/AAACAAAAAAAGAPP/AAACAAAAAAAGAPL/AAADAAAAAAAGAPb/AAADAAAAAAABAPb/AAAEAAAAAAACAPb/AAABAAAAAAADAPb/AAABAAAAAAAEAPb/AAABAAAAAAAFAPb/AAABAAAAAAD7//z/AAABAAAAAAD8//z/AAABAAAAAAD9//z/AAABAAAAAAD+//z/AAABAAAAAAD///z/AAADAAAAAAD6//z/AAABAAAAAAD5//z/AAABAAAAAAD4//z/AAABAAAAAAD3//z/AAAEAAAAAAD3/wEAAAADAAAAAAD3/wAAAAACAAAAAAD3////AAACAAAAAAD3//7/AAACAAAAAAD3//3/AAACAAAAAAD2/wEAAAAEAAAAAAD2/wIAAAACAAAAAAD2/wMAAAAEAAAAAAD5/wMAAAABAAAAAAD4/wMAAAABAAAAAAD3/wMAAAABAAAAAAD5//7/AAACAAAAAAD5////AAACAAAAAAD5/wAAAAACAAAAAAD5/wEAAAACAAAAAAD5/wIAAAACAAAAAAD7//3/AAACAAAAAAD7//7/AAACAAAAAAD7////AAACAAAAAAD7/wAAAAACAAAAAAD7/wEAAAACAAAAAAAGAAMAAAADAAAAAAAFAAMAAAABAAAAAAAEAAMAAAABAAAAAAADAAMAAAABAAAAAAACAAMAAAABAAAAAAABAAMAAAABAAAAAAAAAAMAAAABAAAAAAD//wMAAAABAAAAAAD+/wMAAAABAAAAAAD9/wMAAAABAAAAAAD8/wMAAAABAAAAAAD7/wMAAAABAAAAAAD6/wMAAAABAAAAAAAHAAEAAAAEAAAAAAAHAAIAAAADAAAAAAAGAAIAAAAEAAAAAAAIAP3/AAADAAAAAAAIAP7/AAACAAAAAAAIAP//AAACAAAAAAAIAAAAAAACAAAAAAAIAAEAAAADAAAAAAAGAP3/AAAEAAAAAAAHAP3/AAABAAAAAAAFAP//AAAEAAAAAAAGAP//AAADAAAAAAAFAAAAAAACAAAAAAAEAAEAAAACAAAAAAAEAP7/AAACAAAAAAABAPz/AAAEAAAAAAACAPz/AAABAAAAAAADAPz/AAABAAAAAAAEAPz/AAABAAAAAAAFAPz/AAABAAAAAAAGAPf/AAACAAAAAAAGAPj/AAACAAAAAAAGAPn/AAACAAAAAAAGAPr/AAACAAAAAAAGAPv/AAACAAAAAAAGAPz/AAADAAAAAAD///H/AAACAAAAAAD///D/AAAEAAAAAAAAAPD/AAABAAAAAAABAPD/AAADAAAAAAABAPH/AAACAAAAAAAAAPH/AAAAAAAAAAA=")
tile_set = SubResource("TileSet_xvokm")
script = ExtResource("2_ywrl6")

[node name="LightingModulate" type="CanvasModulate" parent="."]
unique_name_in_owner = true
color = Color(0, 0, 0, 1)

[node name="Sign" parent="." instance=ExtResource("4_72sth")]
position = Vector2(-608, 160)
rotation = -1.5708
dialogue = "res://dialogue/test_room_sign1.dtl"
texture = ExtResource("5_5jmsy")

[node name="Sun" parent="." instance=ExtResource("4_72sth")]
position = Vector2(160, 160)
dialogue = "res://dialogue/test_room_sun.dtl"
texture = ExtResource("6_dg1xt")

[node name="Couch" parent="." instance=ExtResource("4_72sth")]
position = Vector2(96, -160)
dialogue = "res://dialogue/test_room_couch.dtl"
texture = ExtResource("7_g1jef")
dimensions = Vector2i(2, 1)
offset = Vector2(0, -12)

[node name="Dog" parent="." instance=ExtResource("4_72sth")]
position = Vector2(-224, -160)
dialogue = "res://dialogue/test_room_dog.dtl"
texture = ExtResource("7_vnn2i")

[node name="Grapes" parent="." instance=ExtResource("4_72sth")]
position = Vector2(288, 32)
dialogue = "res://dialogue/test_room_grapes.dtl"
texture = ExtResource("8_1rt1a")

[node name="ExitStairs" parent="." instance=ExtResource("4_72sth")]
position = Vector2(32, -928)
rotation = 1.5708
dialogue = "res://dialogue/test_room_completion.dtl"
texture = ExtResource("9_sk700")

[node name="InteractPuzzleGate" parent="." instance=ExtResource("9_amhi4")]
position = Vector2(32, -224)
dialogic_var = "test_room_puzzle_index"
locked_texture = ExtResource("10_2o7ph")
signals_needed = Array[String](["test_room_sun_click", "test_room_couch_click", "test_room_dog_click", "test_room_grapes_click"])
dialogue = "res://dialogue/locked.dtl"
texture = ExtResource("11_77ahb")

[node name="CombatGate" parent="." instance=ExtResource("12_xfvy2")]
position = Vector2(32, -608)
locked_texture = ExtResource("10_2o7ph")
signals_needed = Array[String](["test_room_combat_gate"])
texture = ExtResource("11_77ahb")

[node name="TeslaGate" parent="." instance=ExtResource("12_xfvy2")]
position = Vector2(32, -864)
locked_texture = ExtResource("10_2o7ph")
signals_needed = Array[String](["unlocked", "unlocked"])
auto_open = true
texture = ExtResource("11_77ahb")

[node name="WallLight" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(-288, -32)

[node name="WallLight2" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(-544, 224)
rotation = -1.5708

[node name="WallLight3" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(32, -992)
rotation = 1.5708

[node name="WallLight4" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(416, -736)
rotation = 3.14159

[node name="WallLight5" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(288, 96)
rotation = 3.14159

[node name="WallLight6" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(-288, -416)

[node name="WallLight7" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(-288, -736)

[node name="WallLight8" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(416, -416)
rotation = 3.14159

[node name="TeslaCoil" parent="." instance=ExtResource("14_luyw1")]
position = Vector2(-160, -800)
damage_type_required = 1
dialogue_unlocked = "res://dialogue/tesla_coil_active.dtl"
dialogue = "res://dialogue/tesla_coil_inactive.dtl"
texture = ExtResource("15_ghxts")

[node name="TeslaCoil2" parent="." instance=ExtResource("14_luyw1")]
position = Vector2(288, -800)
dialogue_unlocked = "res://dialogue/tesla_coil_active.dtl"
dialogue = "res://dialogue/tesla_coil_inactive.dtl"
texture = ExtResource("15_ghxts")

[node name="Enemy" parent="." instance=ExtResource("13_augbp")]
position = Vector2(32, -544)

[connection signal="test_room_combat_gate" from="." to="CombatGate" method="advance_unlock"]
[connection signal="unlocked" from="TeslaCoil" to="TeslaGate" method="advance_unlock"]
[connection signal="unlocked" from="TeslaCoil2" to="TeslaGate" method="advance_unlock"]
