[gd_scene load_steps=30 format=4 uid="uid://qw4hbk40dyvm"]

[ext_resource type="TileSet" uid="uid://dpajsxeb15k7l" path="res://maps/tilesets/dungeon.tres" id="1_bnvg4"]
[ext_resource type="Script" path="res://maps/test_map.gd" id="2_ywrl6"]
[ext_resource type="AudioStream" uid="uid://cunppy0avc0yi" path="res://music/spinning_gears.wav" id="3_j2ofq"]
[ext_resource type="Resource" path="res://dialogue/test_room_sign1.dtl" id="4_6q77p"]
[ext_resource type="PackedScene" uid="uid://iwh84j268tml" path="res://maps/interactives/generic/interactive.tscn" id="4_72sth"]
[ext_resource type="AudioStream" uid="uid://duak0a258sghg" path="res://music/bounce_back.wav" id="4_5082e"]
[ext_resource type="Texture2D" uid="uid://cjklr64xiys0a" path="res://textures/interactive/sign.png" id="5_5jmsy"]
[ext_resource type="Texture2D" uid="uid://be0foyybi4008" path="res://textures/interactive/sun.png" id="6_dg1xt"]
[ext_resource type="Resource" path="res://dialogue/test_room_sun.dtl" id="6_lwn61"]
[ext_resource type="Texture2D" uid="uid://dp8dy1cpk5km0" path="res://textures/interactive/couch.png" id="7_g1jef"]
[ext_resource type="Texture2D" uid="uid://binxw1c1e5vyc" path="res://textures/interactive/dog.png" id="7_vnn2i"]
[ext_resource type="Texture2D" uid="uid://dei0ir8jap6a" path="res://textures/interactive/grapes.png" id="8_1rt1a"]
[ext_resource type="Resource" path="res://dialogue/test_room_couch.dtl" id="8_elwwl"]
[ext_resource type="PackedScene" uid="uid://ddmpp54vc5377" path="res://maps/interactives/generic/dialogue_signal_gate.tscn" id="9_amhi4"]
[ext_resource type="Texture2D" uid="uid://dpnsq7nn8m0l2" path="res://textures/interactive/stairs.png" id="9_sk700"]
[ext_resource type="Texture2D" uid="uid://qvcieo8d77lb" path="res://textures/interactive/gate_closed.png" id="10_2o7ph"]
[ext_resource type="Resource" path="res://dialogue/test_room_dog.dtl" id="10_u1hjs"]
[ext_resource type="Texture2D" uid="uid://cgnsug1o0el0w" path="res://textures/interactive/gate_open.png" id="11_77ahb"]
[ext_resource type="PackedScene" uid="uid://8hplcp22i5re" path="res://maps/interactives/lights/wall_light.tscn" id="12_kvvyy"]
[ext_resource type="Resource" path="res://dialogue/test_room_grapes.dtl" id="12_shqtc"]
[ext_resource type="PackedScene" uid="uid://b5mdx6baygoum" path="res://maps/interactives/generic/signal_gate.tscn" id="12_xfvy2"]
[ext_resource type="PackedScene" uid="uid://c2af6y8es466h" path="res://characters/generic/enemy.tscn" id="13_augbp"]
[ext_resource type="Resource" path="res://dialogue/locked.dtl" id="13_ymmi3"]
[ext_resource type="PackedScene" uid="uid://v2x25sfrymso" path="res://maps/interactives/generic/damage_activation_interactive.tscn" id="14_luyw1"]
[ext_resource type="Texture2D" uid="uid://cojmn67i5ba6g" path="res://textures/interactive/tesla_coil.png" id="15_ghxts"]
[ext_resource type="PackedScene" uid="uid://cexm0cxkxol76" path="res://maps/interactives/generic/travel_point.tscn" id="16_c5dte"]
[ext_resource type="Resource" path="res://dialogue/tesla_coil_active.dtl" id="17_7sy0y"]
[ext_resource type="Resource" path="res://dialogue/tesla_coil_inactive.dtl" id="17_er6pd"]
[ext_resource type="Resource" path="res://dialogue/test_room_sign2.dtl" id="20_mlbwn"]

[node name="TestMap" type="TileMapLayer"]
process_mode = 1
tile_map_data = PackedByteArray("AAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAD/////AAAAAAAAAAAAAP//AAAAAAAAAAABAP//AAAAAAAAAAABAAAAAAAAAAAAAAABAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAD//wEAAAAAAAAAAAD+/wEAAAAAAAAAAAD+/wAAAAAAAAAAAAD+////AAAAAAAAAAD+//7/AAAAAAAAAAD///7/AAAAAAAAAAAAAP7/AAAAAAAAAAABAP7/AAAAAAAAAAACAP7/AAAAAAAAAAACAP//AAAAAAAAAAACAAAAAAAAAAAAAAACAAEAAAAAAAAAAAD9//7/AAAAAAAAAAD9////AAAAAAAAAAD9/wAAAAAAAAAAAAD9/wEAAAAAAAAAAAD8//3/AAAAAAAAAAD9//3/AAAAAAAAAAD+//3/AAAAAAAAAAD///3/AAAAAAAAAAAAAP3/AAAAAAAAAAABAP3/AAAAAAAAAAACAP3/AAAAAAAAAAADAP3/AAAAAAAAAAD8/wIAAAAAAAAAAAD9/wIAAAAAAAAAAAD+/wIAAAAAAAAAAAD//wIAAAAAAAAAAAAAAAIAAAAAAAAAAAABAAIAAAAAAAAAAAACAAIAAAAAAAAAAAADAAIAAAAAAAAAAAADAAEAAAAAAAAAAAADAAAAAAAAAAAAAAADAP//AAAAAAAAAAADAP7/AAAAAAAAAAD8//7/AAAAAAAAAAD8////AAAAAAAAAAD8/wAAAAAAAAAAAAD8/wEAAAAAAAAAAAAAAPz/AAAAAAAAAAAEAAAAAAAAAAAAAAAEAP//AAAAAAAAAAAEAP3/AAAAAAAAAAAFAP3/AAAAAAAAAAAFAP7/AAABAAAAAAAGAP7/AAADAAAAAAAHAP7/AAAAAAAAAAAHAP//AAAAAAAAAAAHAAAAAAAAAAAAAAAGAAAAAAAAAAAAAAAGAAEAAAADAAAAAAAFAAEAAAABAAAAAAAFAAIAAAAAAAAAAAAEAAIAAAAAAAAAAAD7/wIAAAAAAAAAAAD6/wIAAAAAAAAAAAD6/wEAAAAAAAAAAAD6/wAAAAAAAAAAAAD6////AAAAAAAAAAD6//7/AAAAAAAAAAD6//3/AAAAAAAAAAD5//3/AAAAAAAAAAD4//3/AAAAAAAAAAD4//7/AAAAAAAAAAD4////AAAAAAAAAAD4/wAAAAAAAAAAAAD4/wEAAAAAAAAAAAD4/wIAAAAAAAAAAAD3/wIAAAAAAAAAAAAAAPb/AAAAAAAAAAAAAPf/AAAAAAAAAAD///f/AAAAAAAAAAD+//f/AAAAAAAAAAD9//f/AAAAAAAAAAD8//f/AAAAAAAAAAD8//j/AAAAAAAAAAD8//n/AAAAAAAAAAD8//r/AAAAAAAAAAD9//r/AAAAAAAAAAD9//v/AAAAAAAAAAD+//v/AAAAAAAAAAD///v/AAAAAAAAAAD8//v/AAAAAAAAAAAAAPv/AAAAAAAAAAABAPv/AAAAAAAAAAACAPv/AAAAAAAAAAADAPv/AAAAAAAAAAAEAPv/AAAAAAAAAAAEAPr/AAAAAAAAAAAFAPr/AAAAAAAAAAAFAPv/AAAAAAAAAAAFAPn/AAAAAAAAAAAFAPj/AAAAAAAAAAAFAPf/AAAAAAAAAAAEAPf/AAAAAAAAAAADAPf/AAAAAAAAAAACAPf/AAAAAAAAAAABAPf/AAAAAAAAAAD///j/AAAAAAAAAAD+//j/AAAAAAAAAAD9//j/AAAAAAAAAAD9//n/AAAAAAAAAAD+//r/AAAAAAAAAAD///r/AAAAAAAAAAAAAPr/AAAAAAAAAAABAPr/AAAAAAAAAAABAPn/AAAAAAAAAAAAAPn/AAAAAAAAAAD///n/AAAAAAAAAAD+//n/AAAAAAAAAAAAAPj/AAAAAAAAAAABAPj/AAAAAAAAAAACAPj/AAAAAAAAAAADAPj/AAAAAAAAAAAEAPj/AAAAAAAAAAAEAPn/AAAAAAAAAAADAPn/AAAAAAAAAAADAPr/AAAAAAAAAAACAPr/AAAAAAAAAAACAPn/AAAAAAAAAAAFAPX/AAAAAAAAAAAEAPX/AAAAAAAAAAADAPX/AAAAAAAAAAACAPX/AAAAAAAAAAABAPX/AAAAAAAAAAAAAPX/AAAAAAAAAAD///X/AAAAAAAAAAD+//X/AAAAAAAAAAD9//X/AAAAAAAAAAD8//X/AAAAAAAAAAD8//T/AAAAAAAAAAD8//P/AAAAAAAAAAD9//P/AAAAAAAAAAD+//P/AAAAAAAAAAD///P/AAAAAAAAAAAAAPP/AAAAAAAAAAABAPP/AAAAAAAAAAACAPP/AAAAAAAAAAADAPP/AAAAAAAAAAAEAPP/AAAAAAAAAAAFAPP/AAAAAAAAAAAFAPT/AAAAAAAAAAAEAPT/AAAAAAAAAAADAPT/AAAAAAAAAAACAPT/AAAAAAAAAAABAPT/AAAAAAAAAAAAAPT/AAAAAAAAAAD///T/AAAAAAAAAAD+//T/AAAAAAAAAAD9//T/AAAAAAAAAAD7//L/AAAEAAAAAAD7//P/AAACAAAAAAD7//T/AAACAAAAAAD7//X/AAADAAAAAAD7//b/AAAEAAAAAAD7//f/AAADAAAAAAD7//j/AAACAAAAAAD7//n/AAACAAAAAAD7//r/AAACAAAAAAD7//v/AAACAAAAAAD8//b/AAABAAAAAAD9//b/AAABAAAAAAD+//b/AAABAAAAAAD///b/AAADAAAAAAAFAPL/AAABAAAAAAAEAPL/AAABAAAAAAADAPL/AAABAAAAAAACAPL/AAABAAAAAAABAPL/AAABAAAAAAAAAPL/AAAAAAAAAAD///L/AAADAAAAAAD+//L/AAABAAAAAAD9//L/AAABAAAAAAD8//L/AAABAAAAAAAGAPX/AAACAAAAAAAGAPT/AAACAAAAAAAGAPP/AAACAAAAAAAGAPL/AAADAAAAAAAGAPb/AAADAAAAAAABAPb/AAAEAAAAAAACAPb/AAABAAAAAAADAPb/AAABAAAAAAAEAPb/AAABAAAAAAAFAPb/AAABAAAAAAD7//z/AAABAAAAAAD8//z/AAABAAAAAAD9//z/AAABAAAAAAD+//z/AAABAAAAAAD///z/AAADAAAAAAD6//z/AAABAAAAAAD5//z/AAABAAAAAAD4//z/AAAAAAAAAAD3//z/AAACAAAAAAD3/wEAAAADAAAAAAD3/wAAAAACAAAAAAD3////AAACAAAAAAD3//7/AAACAAAAAAD3//3/AAACAAAAAAD2/wEAAAAEAAAAAAD2/wIAAAACAAAAAAD2/wMAAAAEAAAAAAD5/wMAAAABAAAAAAD4/wMAAAABAAAAAAD3/wMAAAABAAAAAAD5//7/AAACAAAAAAD5////AAACAAAAAAD5/wAAAAACAAAAAAD5/wEAAAACAAAAAAD5/wIAAAAAAAAAAAD7//3/AAACAAAAAAD7//7/AAACAAAAAAD7////AAACAAAAAAD7/wAAAAACAAAAAAD7/wEAAAACAAAAAAAGAAMAAAABAAAAAAAFAAMAAAABAAAAAAAEAAMAAAABAAAAAAADAAMAAAABAAAAAAACAAMAAAABAAAAAAABAAMAAAABAAAAAAAAAAMAAAABAAAAAAD//wMAAAABAAAAAAD+/wMAAAABAAAAAAD9/wMAAAABAAAAAAD8/wMAAAABAAAAAAD7/wMAAAABAAAAAAD6/wMAAAABAAAAAAAHAAEAAAAAAAAAAAAHAAIAAAAAAAAAAAAGAAIAAAAAAAAAAAAIAP3/AAADAAAAAAAIAP7/AAACAAAAAAAIAP//AAACAAAAAAAIAAAAAAACAAAAAAAIAAEAAAADAAAAAAAGAP3/AAAAAAAAAAAHAP3/AAAAAAAAAAAFAP//AAACAAAAAAAGAP//AAAAAAAAAAAFAAAAAAACAAAAAAAEAAEAAAAEAAAAAAAEAP7/AAAEAAAAAAABAPz/AAAEAAAAAAACAPz/AAABAAAAAAADAPz/AAABAAAAAAAEAPz/AAABAAAAAAAFAPz/AAABAAAAAAAGAPf/AAACAAAAAAAGAPj/AAACAAAAAAAGAPn/AAACAAAAAAAGAPr/AAACAAAAAAAGAPv/AAACAAAAAAAGAPz/AAABAAAAAAD///H/AAACAAAAAAD///D/AAAEAAAAAAAAAPD/AAABAAAAAAABAPD/AAADAAAAAAABAPH/AAACAAAAAAAAAPH/AAAAAAAAAAAHAAMAAAABAAAAAAAIAAIAAAADAAAAAAAIAAMAAAADAAAAAAAIAPz/AAADAAAAAAAHAPz/AAABAAAAAAD4//v/AAAAAAAAAAD4//r/AAAAAAAAAAD4//n/AAAAAAAAAAD4//j/AAAAAAAAAAD4//f/AAAAAAAAAAD4//b/AAAAAAAAAAD5//b/AAAAAAAAAAD6//b/AAAAAAAAAAD6//X/AAABAAAAAAD5//X/AAABAAAAAAD4//X/AAABAAAAAAD3//X/AAAEAAAAAAD3//b/AAACAAAAAAD3//f/AAACAAAAAAD3//j/AAACAAAAAAD3//n/AAACAAAAAAD3//r/AAACAAAAAAD3//v/AAACAAAAAAD5//v/AAACAAAAAAD5//r/AAACAAAAAAD5//n/AAACAAAAAAD5//j/AAACAAAAAAD5//f/AAAEAAAAAAD6//f/AAABAAAAAAA=")
tile_set = ExtResource("1_bnvg4")
script = ExtResource("2_ywrl6")
ost = ExtResource("3_j2ofq")
battle_theme = ExtResource("4_5082e")
map_name = "TestMap"

[node name="LightingModulate" type="CanvasModulate" parent="."]
unique_name_in_owner = true
color = Color(0, 0, 0, 1)

[node name="Sign" parent="." instance=ExtResource("4_72sth")]
position = Vector2(-608, 160)
rotation = -1.5708
dialogue = ExtResource("4_6q77p")
texture = ExtResource("5_5jmsy")

[node name="Sun" parent="." instance=ExtResource("4_72sth")]
position = Vector2(160, 160)
dialogue = ExtResource("6_lwn61")
texture = ExtResource("6_dg1xt")

[node name="Couch" parent="." instance=ExtResource("4_72sth")]
position = Vector2(96, -160)
dialogue = ExtResource("8_elwwl")
texture = ExtResource("7_g1jef")
dimensions = Vector2i(2, 1)
offset = Vector2(0, -12)

[node name="Dog" parent="." instance=ExtResource("4_72sth")]
position = Vector2(-224, -160)
dialogue = ExtResource("10_u1hjs")
texture = ExtResource("7_vnn2i")
pause_music = true

[node name="Grapes" parent="." instance=ExtResource("4_72sth")]
position = Vector2(288, 32)
dialogue = ExtResource("12_shqtc")
texture = ExtResource("8_1rt1a")

[node name="TravelPoint" parent="." instance=ExtResource("16_c5dte")]
position = Vector2(32, -928)
rotation = 1.5708
new_map = "res://maps/test_map_dance_floor.tscn"
texture = ExtResource("9_sk700")

[node name="InteractPuzzleGate" parent="." instance=ExtResource("9_amhi4")]
position = Vector2(32, -224)
dialogic_var = "test_room_puzzle_index"
locked_texture = ExtResource("10_2o7ph")
signals_needed = Array[String](["test_room_sun_click", "test_room_couch_click", "test_room_dog_click", "test_room_grapes_click"])
dialogue = ExtResource("13_ymmi3")
texture = ExtResource("11_77ahb")

[node name="CombatGate" parent="." instance=ExtResource("12_xfvy2")]
position = Vector2(32, -608)
locked_texture = ExtResource("10_2o7ph")
signals_needed = Array[String](["test_room_combat_gate"])
dialogue = ExtResource("13_ymmi3")
texture = ExtResource("11_77ahb")

[node name="TeslaGate" parent="." instance=ExtResource("12_xfvy2")]
position = Vector2(32, -864)
locked_texture = ExtResource("10_2o7ph")
signals_needed = Array[String](["unlocked", "unlocked"])
auto_open = true
dialogue = ExtResource("13_ymmi3")
texture = ExtResource("11_77ahb")

[node name="WallLight" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(-288, -32)

[node name="WallLight2" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(-544, 224)
rotation = -1.5708

[node name="WallLight3" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(32, -992)
rotation = 1.5708

[node name="WallLight4" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(416, -736)
rotation = 3.14159

[node name="WallLight5" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(288, 96)
rotation = 3.14159

[node name="WallLight6" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(-288, -416)

[node name="WallLight7" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(-288, -736)

[node name="WallLight8" parent="." instance=ExtResource("12_kvvyy")]
position = Vector2(416, -416)
rotation = 3.14159

[node name="TeslaCoil" parent="." instance=ExtResource("14_luyw1")]
position = Vector2(-160, -800)
damage_type_required = 1
dialogue_unlocked = ExtResource("17_7sy0y")
dialogue = ExtResource("17_er6pd")
texture = ExtResource("15_ghxts")

[node name="TeslaCoil2" parent="." instance=ExtResource("14_luyw1")]
position = Vector2(288, -800)
damage_type_required = 1
dialogue_unlocked = ExtResource("17_7sy0y")
dialogue = ExtResource("17_er6pd")
texture = ExtResource("15_ghxts")

[node name="Enemy" parent="." instance=ExtResource("13_augbp")]
position = Vector2(32, -544)

[node name="Sign2" parent="." instance=ExtResource("4_72sth")]
position = Vector2(-288, -608)
rotation = 1.57034
dialogue = ExtResource("20_mlbwn")
texture = ExtResource("5_5jmsy")

[connection signal="test_room_combat_gate" from="." to="CombatGate" method="advance_unlock"]
[connection signal="unlocked" from="TeslaCoil" to="TeslaGate" method="advance_unlock"]
[connection signal="unlocked" from="TeslaCoil2" to="TeslaGate" method="advance_unlock"]
